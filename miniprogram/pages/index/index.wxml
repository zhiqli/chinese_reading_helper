<!--index.wxml-->
<navigation-bar title="æœ—æœ—ä¹¦å£° å£°å£°å…¥è€³" back="{{false}}" color="black" background="#FFF"></navigation-bar>

<view class="container">
  <!-- é€‰é¡¹å¡ -->
  <view class="tabs">
    <view class="tab {{currentTab === 'chinese' ? 'active' : ''}}" bindtap="switchTab" data-tab="chinese">
      <text class="tab-icon">ğŸ“–</text>
      <text class="tab-text">è¯­æ–‡</text>
    </view>
    <view class="tab {{currentTab === 'english' ? 'active' : ''}}" bindtap="switchTab" data-tab="english">
      <text class="tab-icon">ğŸ”¤</text>
      <text class="tab-text">è‹±è¯­</text>
    </view>
  </view>


  <!-- è¯­æ–‡æ¿å— -->
  <view class="tab-content" wx:if="{{currentTab === 'chinese'}}">
    <!-- å¹´çº§å’Œå­¦æœŸé€‰æ‹© -->
    <view class="grade-selector">
      <picker class="picker" range="{{grades}}" value="{{gradeIndex}}" bindchange="onGradeChange">
        <view class="picker-text">
          å¹´çº§ï¼š{{grades[gradeIndex]}}
        </view>
      </picker>
      
      <picker class="picker" range="{{semesters}}" value="{{semesterIndex}}" bindchange="onSemesterChange">
        <view class="picker-text">
          å­¦æœŸï¼š{{semesters[semesterIndex]}}
        </view>
      </picker>
    </view>

    <!-- è¯¾æ–‡åˆ—è¡¨ -->
    <scroll-view class="article-list" scroll-y>
      <view class="article-grid">
        <view class="article-card" wx:for="{{articles}}" wx:key="index" bindtap="onArticleClick" data-index="{{index}}">
          <view class="article-image">
            <view class="article-img-placeholder" style="background: linear-gradient(135deg, {{item.color}} 0%, {{item.darkColor}} 100%)">{{item.emoji}}</view>
            <view class="article-title-overlay">
              <text class="article-title">{{item.title}}</text>
            </view>
          </view>
          <view class="article-controls">
            <view class="play-btn" catchtap="playAudio" data-index="{{index}}">
              <text class="play-icon">â–¶</text>
              <text class="play-text">æ’­æ”¾</text>
            </view>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- è‹±è¯­æ¿å— -->
  <view class="tab-content" wx:if="{{currentTab === 'english'}}">
    <view class="coming-soon">
      <text>å¼€å‘ä¸­...</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ’­æ”¾æ¡ -->
  <audio-player 
    id="audioPlayer"
    currentTrack="{{currentTrack}}"
    isPlaying="{{isPlaying}}"
    progress="{{progress}}"
    currentTime="{{currentTime}}"
    duration="{{duration}}"
    bind:toggleplay="onTogglePlay"
  />
</view>
